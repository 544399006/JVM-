# 深入 理解JVM

## 1. 什么是JVM虚拟机

## 2. JVM的内存结构

 * 方法区： 又称永久区 （主要存放static修饰的变量，class类的加载信息，）注意：不要定义太多的静态变量，因为垃圾回收机制是不会回收的。  所有线程共享

   

 * 堆 ： 所有new对象，都会存在堆里面，例如：定义的数组   所有线程共享

   

 * 栈：主要存放临时变量   在多线程的情况下，共享同一个局部变量，不会发生线程安全问题，因为栈是每个线程都有自己的本地线程栈

   

 * 本地方法栈： 安卓开发，C语言，都会适用到java语言，JNI就是java语言去调C语言

   

 * PC寄存器：程序计数器是一块较小的内存空间，它可以看作是当前线程所执行的字节码的行号指示器。

   由于Java虚拟机的多线程是通过线程轮流切换并分配处理器执行时间的方式来实现的，一个处理器都只会执行一条线程中的指令。因此，为了线程切换后能恢复到正确的执行位置，每条线程都有一个独立的程序计数器，各个线程之间计数器互不影响，独立存储。称之为“线程私有”的内存。程序计数器内存区域是虚拟机中唯一没有规定OutOfMemoryError情况的区域。

   

 * 直接内存（java nio): 

   

 * 执行引擎：虚拟机核心的组件就是执行引擎，它负责执行虚拟机的字节码，一般户先进行编译成机器码后执行。

   

 * 垃圾回收系统：垃圾收集系统是Java的核心，也是不可少的，Java有一套自己进行垃圾清理的机制，开发人员无需手工清理

   

   ![jvm内存结构](https://yizhiyong-note.oss-cn-shenzhen.aliyuncs.com/img/jvm内存结构.png)